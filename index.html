<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form method="post" id="form-receita">
    <!-- ATUALIZAR O VALUE NO REACT PARA PEGAR A DATA DE HOJE-->
        <input type="date" value="2025-06-08" min="2025-01-01" max="2025-06-08" name="dataReceita" id="dataReceita" placeholder="data">
        <input type="text" name="descricaoReceita" id="descricaoReceita" placeholder="descricao">
        <input type="text" name="valorReceita" id="valorReceita" placeholder="valor">
        <button type="submit">Adicionar</button>
    </form>
    
    <script>
        //pegando data de hoje para o input date
        const date = new Date();
        const dataHoje = `0${date.getDate()}-0${date.getMonth()}-${date.getFullYear()}`
        console.log(dataHoje)

        //selecionando os inputs
        const formRec = document.querySelector('#form-receita');
        const dataRec = document.querySelector('#dataReceita');
        const descRec = document.querySelector('#descricaoReceita');
        const valRec = document.querySelector('#valorReceita');

        formRec.addEventListener('submit', (e) => {
            e.preventDefault();
            enviaDados();
        })

        //funcao para enviar os dados para o backend
        function enviaDados(){
            const params = {
                data: dataRec.value,
                descricao: descRec.value,
                valor: valRec.value
            };

            const options = {
                method: 'POST',
                headers: {
                    'Content-Type':'application/json',
                    'Accept':'application/json'
                },
                body: JSON.stringify( params )
            };
            
            console.log(options.body)

            fetch('http://localhost:3000/prestacao', options)
            .then(res => res.json())
            .then(res => {
                return res
            })
        }

    </script>
</body>
</html>